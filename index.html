<script>
    const app = Telegram.WebApp;

    function validateForm(data) {
        if (!data.name || data.name.trim() === '') {
            alert('Введите имя!');
            return false;
        }
        if (!data.phone || !/^\+?\d{10,15}$/.test(data.phone)) {
            alert('Введите корректный телефон!');
            return false;
        }
        return true;
    }

    function submitForm(type) {
        console.log("[DEBUG] Отправка данных...");

        const data = {
            name: document.getElementById('name').value,
            phone: document.getElementById('phone').value,
            type: type
        };

        if (!validateForm(data)) {
            console.log("[DEBUG] Валидация не пройдена");
            return;
        }

        console.log("[DEBUG] Данные для отправки:", data);
        app.sendData(JSON.stringify(data));
        app.close();
    }
</script>
